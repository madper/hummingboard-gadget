bootfile=kernel.img
kernel_snap=hummingboard-kernel_x1.snap
boot_profixes=/hummingboard-kernel_x1.snap/

fdt_file=imx6q-hummingboard.dtb

bootit=setenv boot_file ${bootfile}; fdt_addr_bak=${fdt_addr}; if test -n ${ramdisk_file}; then if run loadramdisk; then  echo Loaded ${ramdisk_file};  else  setenv ramdisk_addr -;  fi;  else  setenv ramdisk_addr -;  fi;  if test ${boot_file} = kernel.img; then  if test ${boot_fdt} = yes || test ${boot_fdt} = try; then  if run loadfdt; then  echo Loaded ${fdt_file};  else  setenv fdt_addr;  if test ${boot_fdt} = try; then  echo WARN: Cannot load the DTB and boot file is type zImage; echo if you have not appended a dtb to the file it may; echo hang after displaying Starting kernel...; echo ; else  echo WARN: Cannot load the DT;  fi;  fi;  else  setenv fdt_addr;  fi;  else  setenv fdt_addr;  fi;  run autoboot;  setenv fdt_addr ${fdt_addr_bak};

snappy_cmdline=init=/lib/systemd/systemd ro
loadbootfile=echo loading /${snap_kernel}/${bootfile}; load mmc ${mmcdev}:${mmcpart} ${loadaddr} /${snap_kernel}/${bootfile};
loadfdt=echo loading fdt: /${snap_kernel}/dtbs/${fdt_file} ; load mmc ${mmcdev}:${mmcpart} ${fdt_addr} /${snap_kernel}/dtbs/${fdt_file}

ramdisk_addr=0x15500000

loadramdisk=load mmc ${mmcdev}:${mmcpart} ${ramdisk_addr} /${snap_kernel}/${ramdisk_file}; 

snappy_boot=if test "${snap_mode}" = "try"; then setenv snap_mode "trying"; saveenv; if test "${snap_try_core}" != ""; then setenv snap_core "${snap_try_core}"; fi; if test "${snap_try_kernel}" != ""; then setenv snap_kernel "${snap_try_kernel}"; fi; elif test "${snap_mode}" = "trying"; then setenv snap_mode ""; saveenv; fi; setenv mmcroot "/dev/mmcblk0p2 ${snappy_cmdline} snap_core=${snap_core} snap_kernel=${snap_kernel}"; run mmcargs; bootz ${loadaddr} ${ramdisk_addr} ${fdt_addr}

autoboot=run snappy_boot
file_prefix=/${snap_kernel}/
mmcargs=setenv fdt_file imx6q-hummingboard.dtb; echo file_prefix: ${file_prefix}; setenv bootargs "console=ttymxc0,115200 video=mxcfb0:dev=hdmi,1920x1080M@60,if=RGB24,bpp=32 root=${mmcroot}"
ramdisk_file=initrd.img
bootdelay=1
